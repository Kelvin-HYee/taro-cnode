{"version":3,"sources":["webpack:///./.temp/pages/login/index.scss?9d53","webpack:///./.temp/pages/login/index.scss","webpack:///./.temp/pages/login/index.js","webpack:///./.temp/hoc/router.js"],"names":["content","__webpack_require__","module","i","options","sourceMap","hmr","transform","insertInto","undefined","locals","exports","push","version","sources","names","mappings","file","sourcesContent","sourceRoot","_taroH","_components","_taroUi","_router","Login","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","apply","arguments","config","navigationBarTitleText","logon","state","token","showMessage","props","authLogin","then","Taro","navigateTo","url","scanCode","success","res","errMsg","result","length","err","isHiddenIcon","iconSize","iconType","iconColor","text","Component","message","showToast","title","val","setState","_nervjs2","default","createElement","View","className","_index2","pageType","fixHead","needAdd","getEnv","onClick","AtInput","type","placeholder","value","onChange","handleChange","bind","maxlength","withUser","tslib_1","_reduxH","actions","WrappedComponent","allowNologin","WithUserHOC","authCheckState","_inherits","_createClass","key","isSuperRender","userInfo","userId","perform","redirectTo","componentWillMount","render","_get","prototype","call","__decorate","connect","_ref","auth","dispatch"],"mappings":"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","file":"chunk/login_index.js","sourcesContent":["\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--8-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/resolve-url-loader/index.js!../../../node_modules/sass-loader/lib/loader.js??ref--8-4!./index.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"sourceMap\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--8-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/resolve-url-loader/index.js!../../../node_modules/sass-loader/lib/loader.js??ref--8-4!./index.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--8-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/resolve-url-loader/index.js!../../../node_modules/sass-loader/lib/loader.js??ref--8-4!./index.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".login-page .page-body {\\n  margin-top: 2.13333rem;\\n  padding: 1.06667rem 0.32rem;\\n  min-height: 8.53333rem;\\n  background-color: #fff;\\n}\\n\\n.login-page .page-body .tip {\\n  font-size: 0.68267rem;\\n  text-align: center;\\n  padding-bottom: 4.26667rem;\\n  padding-top: 2.13333rem;\\n}\\n\\n.login-page .page-body .label {\\n  display: inline-block;\\n  width: 100%;\\n  margin-top: 0.32rem;\\n  position: relative;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.login-page .page-body .label .txt {\\n  padding: 0.256rem 0;\\n  border: none;\\n  border-bottom: 0.02133rem solid #4fc08d;\\n  background-color: transparent;\\n  width: 100%;\\n  font-size: 0.29867rem;\\n  color: #313131;\\n}\\n\\n.login-page .page-body .label .button {\\n  display: inline-block;\\n  width: 99%;\\n  height: 1.70667rem;\\n  line-height: 1.70667rem;\\n  border-radius: 0.064rem;\\n  color: #fff;\\n  font-size: 0.68267rem;\\n  background-color: #4fc08d;\\n  border: none;\\n  border-bottom: 0.08533rem solid #3aa373;\\n  text-align: center;\\n  vertical-align: middle;\\n}\\n\\n.login-page .page-body .label .file {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  height: 0.896rem;\\n  width: 48%;\\n  outline: medium none;\\n  opacity: 0;\\n}\\n\\n\", \"\", {\"version\":3,\"sources\":[\"/home/travis/build/icai/taro-cnode/.temp/pages/login/index.scss\"],\"names\":[],\"mappings\":\"AAAA;EAEM,uBAAA;EACA,4BAAA;EACA,uBAAA;EACA,uBAAA;CAAL;;AALD;EAQQ,sBAAA;EACA,mBAAA;EACA,2BAAA;EACA,wBAAA;CACP;;AAZD;EAeQ,sBAAA;EACA,YAAA;EACA,oBAAA;EACA,mBAAA;EACA,QAAA;EACA,OAAA;CACP;;AArBD;EAuBU,oBAAA;EACA,aAAA;EACA,wCAAA;EACA,8BAAA;EACA,YAAA;EACA,sBAAA;EACA,eAAA;CAET;;AA/BD;EAiCU,sBAAA;EACA,WAAA;EACA,mBAAA;EACA,wBAAA;EACA,wBAAA;EACA,YAAA;EACA,sBAAA;EACA,0BAAA;EACA,aAAA;EACA,wCAAA;EACA,mBAAA;EACA,uBAAA;CAET;;AA9CD;EAgDU,mBAAA;EACA,OAAA;EACA,QAAA;EACA,iBAAA;EACA,WAAA;EACA,qBAAA;EACA,WAAA;CAET\",\"file\":\"index.scss\",\"sourcesContent\":[\".login-page {\\n    .page-body {\\n      margin-top: 100px;\\n      padding: 50px 15px;\\n      min-height: 400px;\\n      background-color: #fff;\\n\\n      .tip {\\n        font-size: 32px;\\n        text-align: center;\\n        padding-bottom: 200px;\\n        padding-top: 100px;\\n      }\\n\\n      .label {\\n        display: inline-block;\\n        width: 100%;\\n        margin-top: 15px;\\n        position: relative;\\n        left: 0;\\n        top: 0;\\n\\n        .txt {\\n          padding: 12px 0;\\n          border: none;\\n          border-bottom: 1px solid #4fc08d;\\n          background-color: transparent;\\n          width: 100%;\\n          font-size: 14px;\\n          color: #313131;\\n        }\\n\\n        .button {\\n          display: inline-block;\\n          width: 99%;\\n          height: 80px;\\n          line-height: 80px;\\n          border-radius: 3px;\\n          color: #fff;\\n          font-size: 32px;\\n          background-color: #4fc08d;\\n          border: none;\\n          border-bottom: 4px solid #3aa373;\\n          text-align: center;\\n          vertical-align: middle;\\n        }\\n\\n        .file {\\n          position: absolute;\\n          top: 0;\\n          left: 0;\\n          height: 42px;\\n          width: 48%;\\n          outline: medium none;\\n          opacity: 0;\\n        }\\n      }\\n    }\\n}\\n\\n\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n","import Taro from '@tarojs/taro-h5';\nimport { Component } from \"@tarojs/taro-h5\";\nimport Nerv from \"nervjs\";\nimport { View } from '@tarojs/components';\nimport Header from '../../components/header/index';\nimport { AtInput } from 'taro-ui';\nimport { withUser } from \"../../hoc/router\";\nimport './index.scss';\nclass Login extends Component {\n  constructor() {\n    super(...arguments);\n\n    this.state = {\n      token: \"\",\n      err: {\n        isHiddenIcon: true,\n        iconSize: 36,\n        iconType: \"error\",\n        iconColor: \"#f00\",\n        text: \"\"\n      }\n    };\n  }\n  showMessage(message) {\n    Taro.showToast({ title: message });\n  }\n  handleChange(val) {\n    this.setState({ token: val });\n  }\n  render() {\n    const { token } = this.state;\n    return <View className=\"page-box login-page\">\n        <Header pageType={\"登录\"} fixHead={true} needAdd={true} />\n        <View className=\"page-body\">\n          {Taro.getEnv() == \"WEAPP\" ? <View>\n              <View className=\"tip\"> 前往 主页/ 设置 </View>\n              <View className=\"label\">\n                <View className=\"button\" onClick={this.scanCode}>\n                  扫码登陆\n                </View>\n              </View>\n            </View> : <View>\n              <View className=\"label\">\n                <AtInput className=\"txt\" type=\"text\" placeholder=\"Access Token\" value={token} onChange={this.handleChange.bind(this)} maxlength=\"36\" />\n              </View>\n              <View className=\"label\">\n                <View className=\"button\" onClick={this.logon}>\n                  登录\n                </View>\n              </View>\n            </View>}\n        </View>\n      </View>;\n  }\n  config = {\n    navigationBarTitleText: \"登录\"\n  };\n  logon = () => {\n    if (this.state.token === \"\") {\n      this.showMessage(\"令牌格式错误,应为36位UUID字符串\");\n      return false;\n    }\n    this.props.authLogin(this.state.token).then(() => {\n      Taro.navigateTo({ url: \"/pages/list/index\" });\n    });\n  };\n  scanCode = () => {\n    // charSet: \"UTF-8\"\n    // errMsg: \"scanCode:ok\"\n    // result: \"xxx-xxx-xx-xxx-xxx\"\n    // scanType: \"QR_CODE\"\n    Taro.scanCode({\n      success: res => {\n        if (res.errMsg == \"scanCode:ok\") {\n          if (res.result.length == 36) {\n            debugger;\n            this.props.authLogin(res.result).then(() => {\n              Taro.navigateTo({ url: \"/pages/list/index\" });\n            });\n          }\n        } else {\n          this.showMessage(\"令牌格式错误,应为36位UUID字符串\");\n          return false;\n        }\n      }\n    });\n  };\n}\nexport default withUser(Login, true);","import Taro from '@tarojs/taro-h5';\nimport * as tslib_1 from \"tslib\";\nimport { Component } from \"@tarojs/taro-h5\";\nimport Nerv from \"nervjs\";\nimport { connect } from \"@tarojs/redux-h5\";\nimport * as actions from \"../actions/auth\";\nfunction withUser(WrappedComponent, allowNologin = false) {\n  let WithUserHOC = class WithUserHOC extends WrappedComponent {\n    constructor() {\n      super(...arguments);\n      this.props.authCheckState();\n    }\n    isSuperRender() {\n      const props = this.props;\n      return allowNologin || props.userInfo && props.userInfo.userId;\n    }\n    // refer  https://github.com/ReactTraining/react-router/blob/master/packages/react-router/modules/Redirect.js\n    perform() {\n      if (!this.isSuperRender()) {\n        Taro.redirectTo({ url: \"/pages/login/index\" });\n      }\n    }\n    componentWillMount() {\n      this.perform();\n    }\n    render() {\n      if (this.isSuperRender()) {\n        return super.render();\n      } else {\n        return null;\n      }\n    }\n  };\n  WithUserHOC = tslib_1.__decorate([connect(({ auth }) => ({ userInfo: auth }), dispatch => ({\n    authLogin: (...args) => dispatch(actions.auth(...args)),\n    authCheckState: () => dispatch(actions.authCheckState())\n  }))], WithUserHOC);\n  ;\n  return WithUserHOC;\n}\nexport { Component, withUser };"],"sourceRoot":""}