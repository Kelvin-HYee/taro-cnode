{"version":3,"sources":["webpack:///./.temp/pages/user/index.scss?e11e","webpack:///./.temp/pages/user/index.scss","webpack:///./.temp/pages/user/index.js","webpack:///./.temp/hoc/router.js"],"names":["content","__webpack_require__","module","i","options","sourceMap","hmr","transform","insertInto","undefined","locals","exports","push","version","sources","names","mappings","file","sourceRoot","tslib_1","_router","_components","_reduxH","actions","utils","_request","User","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","apply","arguments","config","navigationBarTitleText","changeItem","idx","currentData","state","user","recent_replies","recent_topics","setState","prevState","_extends","selectItem","avatar_url","showMenu","_inherits","Component","_createClass","key","value","componentDidMount","getUser","componentDidHide","_this2","loginname","$router","params","Taro","showToast","title","navigateTo","url","get","then","res","d","data","length","render","_state","getLastTimeStr","date","friendly","_nervjs2","default","createElement","View","className","_index2","pageType","fixHead","needAdd","Image","src","Text","create_at","score","_classnames2","item","br","selected","onClick","bind","map","_link2","to","author","class","id","last_reply_at","__decorate","connect","_ref","userInfo","auth","dispatch","authCheckState","_taroH","withUser","WrappedComponent","allowNologin","WithUserHOC","props","isSuperRender","userId","perform","redirectTo","componentWillMount","_get","prototype","call","authLogin"],"mappings":"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","file":"chunk/user_index.js","sourcesContent":["\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--8-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/resolve-url-loader/index.js!../../../node_modules/sass-loader/lib/loader.js??ref--8-4!./index.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"sourceMap\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--8-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/resolve-url-loader/index.js!../../../node_modules/sass-loader/lib/loader.js??ref--8-4!./index.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--8-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/resolve-url-loader/index.js!../../../node_modules/sass-loader/lib/loader.js??ref--8-4!./index.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"index.scss\",\"sourceRoot\":\"\"}]);\n\n// exports\n","import Taro from '@tarojs/taro-h5';\nimport * as tslib_1 from \"tslib\";\nimport Nerv from \"nervjs\";\nimport { Component } from \"../../hoc/router\";\nimport { View, Image, Text } from '@tarojs/components';\nimport { connect } from \"@tarojs/redux-h5\";\nimport Header from \"../../components/header/index\";\nimport Link from '../../components/link';\nimport classNames from \"classnames\";\nimport * as actions from \"../../actions/auth\";\nimport * as utils from '../../libs/utils';\nimport { get } from \"../../utils/request\";\nimport './index.scss';\nlet User = class User extends Component {\n  constructor() {\n    super(...arguments);\n\n    this.state = {\n      currentData: [],\n      user: {\n        avatar_url: \"\"\n      },\n      showMenu: false,\n      selectItem: 1\n    };\n  }\n  componentDidMount() {\n    this.getUser();\n  }\n  componentDidHide() {}\n  getUser() {\n    let loginname = this.$router.params.loginname;\n    if (!loginname) {\n      Taro.showToast({\n        title: \"缺少用户名参数\"\n      });\n      Taro.navigateTo({\n        url: \"/pages/list/index\"\n      });\n      return false;\n    }\n    get({\n      url: \"https://cnodejs.org/api/v1/user/\" + loginname\n    }).then(res => {\n      let d = res.data;\n      if (d && d.data) {\n        let data = d.data;\n        this.setState({\n          user: data\n        });\n        if (data.recent_replies.length > 0) {\n          this.setState({\n            currentData: data.recent_replies\n          });\n        } else {\n          this.setState({\n            currentData: data.recent_topics,\n            selectItem: 2\n          });\n        }\n      }\n    });\n  }\n  render() {\n    const { selectItem, user, currentData } = this.state;\n    const getLastTimeStr = (date, friendly) => {\n      return utils.getLastTimeStr(date, friendly);\n    };\n    return <View className=\"flex-wrp\">\n        <Header pageType={\"用户信息\"} fixHead={true} showMenu={true} needAdd={true} />\n        <View className=\"userinfo\">\n          <Image className=\"u-img\" src={user.avatar_url} />\n          <br />\n          <Text className=\"u-name\">{user.loginname}</Text>\n          <View className=\"u-bottom\">\n            <Text className=\"u-time\">\n              {getLastTimeStr(user.create_at, false)}\n            </Text>\n            <Text className=\"u-score\">\n              积分：\n              {user.score}\n            </Text>\n          </View>\n        </View>\n        <View className=\"topics\">\n          <View className=\"user-tabs\">\n            <View className={classNames({\n            item: 1,\n            br: 1,\n            selected: selectItem === 1\n          })} onClick={this.changeItem.bind(this, 1)}>\n              最近回复\n            </View>\n            <View className={classNames({ item: 1, selected: selectItem === 2 })} onClick={this.changeItem.bind(this, 2)}>\n              最新发布\n            </View>\n          </View>\n          {currentData.map(item => {\n          return <View className=\"message\">\n                <View className=\"user\">\n                  <Link className=\"head\" to={{\n                url: \"/pages/user/index\",\n                params: { loginname: item.author.loginname }\n              }}>\n                    <Image class=\"head\" src={item.author.avatar_url} />\n                  </Link>\n                  <Link className=\"info\" to={{ url: \"/pages/topic/index\", params: { id: item.id } }}>\n                    <View className=\"t-title\">{item.title}</View>\n                    <Text className=\"cl mt12\">\n                      <Text className=\"name\">{item.author.loginname}</Text>\n                    </Text>\n                    <Text className=\"cr mt12\">\n                      <Text className=\"name\">\n                        {getLastTimeStr(item.last_reply_at, true)}\n                      </Text>\n                    </Text>\n                  </Link>\n                </View>\n              </View>;\n        })}\n          {currentData.length === 0 ? <View className=\"no-data\">\n              <Text className=\"iconfont icon-empty\"></Text>\n              暂无数据!\n            </View> : \"\"}\n        </View>\n      </View>;\n  }\n  config = {\n    navigationBarTitleText: \"用户信息\"\n  };\n  changeItem = idx => {\n    const currentData = idx === 1 ? this.state.user.recent_replies : this.state.user.recent_topics;\n    this.setState(prevState => ({\n      ...prevState,\n      selectItem: idx,\n      currentData: currentData\n    }));\n  };\n};\nUser = tslib_1.__decorate([connect(({ auth }) => ({\n  userInfo: auth\n}), dispatch => ({\n  authCheckState() {\n    dispatch(actions.authCheckState());\n  }\n}))], User);\nexport default User;","import Taro from '@tarojs/taro-h5';\nimport * as tslib_1 from \"tslib\";\nimport { Component } from \"@tarojs/taro-h5\";\nimport Nerv from \"nervjs\";\nimport { connect } from \"@tarojs/redux-h5\";\nimport * as actions from \"../actions/auth\";\nfunction withUser(WrappedComponent, allowNologin = false) {\n  let WithUserHOC = class WithUserHOC extends WrappedComponent {\n    constructor() {\n      super(...arguments);\n      this.props.authCheckState();\n    }\n    isSuperRender() {\n      const props = this.props;\n      return allowNologin || props.userInfo && props.userInfo.userId;\n    }\n    // refer  https://github.com/ReactTraining/react-router/blob/master/packages/react-router/modules/Redirect.js\n    perform() {\n      if (!this.isSuperRender()) {\n        Taro.redirectTo({ url: \"/pages/login/index\" });\n      }\n    }\n    componentWillMount() {\n      this.perform();\n    }\n    render() {\n      if (this.isSuperRender()) {\n        return super.render();\n      } else {\n        return null;\n      }\n    }\n  };\n  WithUserHOC = tslib_1.__decorate([connect(({ auth }) => ({ userInfo: auth }), dispatch => ({\n    authLogin: (...args) => dispatch(actions.auth(...args)),\n    authCheckState: () => dispatch(actions.authCheckState())\n  }))], WithUserHOC);\n  ;\n  return WithUserHOC;\n}\nexport { Component, withUser };"],"sourceRoot":""}