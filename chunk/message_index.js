(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"134":function(e,t,r){var n=r(135);"string"==typeof n&&(n=[[e.i,n,""]]);var o={"sourceMap":!0,"hmr":!0,"transform":void 0,"insertInto":void 0};r(5)(n,o);n.locals&&(e.exports=n.locals)},"135":function(e,t,r){(e.exports=r(4)(!0)).push([e.i,"","",{"version":3,"sources":[],"names":[],"mappings":"","file":"index.scss","sourceRoot":""}])},"43":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),a=r(1),i=_interopRequireDefault(r(0)),u=r(50),c=r(48),s=_interopRequireDefault(r(52)),l=_interopRequireDefault(r(53)),f=_interopRequireDefault(r(51)),p=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(6)),d=r(11);function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}r(134);var h=function(e){function Message(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Message);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Message.__proto__||Object.getPrototypeOf(Message)).apply(this,arguments));return e.config={"navigationBarTitleText":"消息"},e.changeItem=function(t){var r=1===t?e.state.message.hasnot_read_messages:e.state.message.has_read_messages;e.setState(function(e){return n({},e,{"selectItem":t,"currentData":r,"noData":0===r.length})})},e.markall=function(){var t=e.props.userInfo;(0,d.post)({"url":"https://cnodejs.org/api/v1/message/mark_all","data":{"accesstoken":t.token}}).then(function(e){var t=e.data;t&&t.success&&window.location.reload()})},e.state={"showMenu":!1,"selectItem":2,"message":{"hasnot_read_messages":[],"has_read_messages":[]},"noData":!1,"currentData":[],"no_read_len":0},e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Message,a.Component),o(Message,[{"key":"componentDidShow","value":function componentDidShow(){var e=this,t=this.props.userInfo;(0,d.get)({"url":"https://cnodejs.org/api/v1/messages?accesstoken="+t.token}).then(function(t){var r=t.data,o={};r&&r.data?(o.message=r.data,o.no_read_len=r.data.hasnot_read_messages.length,r.data.hasnot_read_messages.length>0?o.currentData=r.data.hasnot_read_messages:(o.currentData=r.data.has_read_messages,o.selectItem=2),o.noData=0===o.currentData.length):o.noData=!0,e.setState(n({},o))})}},{"key":"render","value":function render(){var e=this.state,t=e.currentData,r=e.no_read_len,n=e.selectItem,o=e.noData;return i.default.createElement(c.View,{"className":"flex-wrp"},i.default.createElement(l.default,{"pageType":"消息","fixHead":!0,"showMenu":!0,"needAdd":!0,"messageCount":r}),i.default.createElement(c.View,{"className":"page-box page"},i.default.createElement(c.View,{"className":"tabs"},i.default.createElement(c.View,{"className":(0,f.default)({"item":1,"br":1,"selected":2===n}),"onClick":this.changeItem.bind(this,2)},"已读消息"),i.default.createElement(c.View,{"className":(0,f.default)({"item":1,"selected":1===n}),"onClick":this.changeItem.bind(this,1)},"未读消息",r>0?i.default.createElement(c.Text,{"className":"iconfont read","onClick":this.markall},""):"")),i.default.createElement(c.View,{"className":"tab-content"},t.map(function(e,t){return i.default.createElement(c.View,{"className":"message markdown-body"},i.default.createElement(c.View,{"className":"user"},i.default.createElement(c.Image,{"className":"head","src":e.author.avatar_url}),i.default.createElement(c.View,{"className":"info"},i.default.createElement(c.Text,{"className":"cl"},i.default.createElement(c.Text,{"className":"name"},e.author.loginname),"at"===e.type?i.default.createElement(c.Text,{"className":"name"},"在回复中@了您"):"","reply"===e.type?i.default.createElement(c.Text,{"className":"name"},"回复了您的话题"):""),i.default.createElement(c.Text,{"className":"cr"},i.default.createElement(c.Text,{"className":"name"},function getLastTimeStr(e,t){return p.getLastTimeStr(e,t)}(e.reply.create_at,!0))))),i.default.createElement(c.View,{"className":"reply_content","dangerouslySetInnerHTML":{"__html":e.reply.content}}),i.default.createElement(s.default,{"to":{"url":"/pages/topic/index","params":{"id":e.topic.id}}},i.default.createElement(c.View,{"className":"topic-title"},"话题：",e.topic.title)))}),o?i.default.createElement(c.View,{"className":"no-data"},i.default.createElement("i",{"className":"iconfont icon-empty"},""),"暂无数据!"):"")))}}]),Message}();t.default=(0,u.withUser)(h)},"49":function(e,t,r){(function(r){var n,o,a,i,u,c,s,l,f,p,d,h,m,y,_,b,v,w,g,O;!function(j){var P="object"==typeof r?r:"object"==typeof self?self:"object"==typeof this?this:{};function createExporter(e,t){return e!==P&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{"value":!0}):e.__esModule=!0),function(r,n){return e[r]=t?t(r,n):n}}void 0===(n=function(e){!function(e){var t=Object.setPrototypeOf||{"__proto__":[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};o=function(e,r){function __(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)},a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]]);return r},u=function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},c=function(e,t){return function(r,n){t(r,n,e)}},s=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function fulfilled(e){try{step(n.next(e))}catch(e){a(e)}}function rejected(e){try{step(n.throw(e))}catch(e){a(e)}}function step(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})},f=function(e,t){var r,n,o,a,i={"label":0,"sent":function(){if(1&o[0])throw o[1];return o[1]},"trys":[],"ops":[]};return a={"next":verb(0),"throw":verb(1),"return":verb(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function verb(a){return function(u){return function step(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{"value":a[1],"done":!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{"value":a[0]?a[1]:void 0,"done":!0}}([a,u])}}},p=function(e,t){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])},d=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{"next":function(){return e&&r>=e.length&&(e=void 0),{"value":e&&e[r++],"done":!e}}}},h=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={"error":e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},m=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e},y=function(e){return this instanceof y?(this.v=e,this):new y(e)},_=function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),a=[];return n={},verb("next"),verb("throw"),verb("return"),n[Symbol.asyncIterator]=function(){return this},n;function verb(e){o[e]&&(n[e]=function(t){return new Promise(function(r,n){a.push([e,t,r,n])>1||resume(e,t)})})}function resume(e,t){try{!function step(e){e.value instanceof y?Promise.resolve(e.value.v).then(fulfill,reject):settle(a[0][2],e)}(o[e](t))}catch(e){settle(a[0][3],e)}}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){e(t),a.shift(),a.length&&resume(a[0][0],a[0][1])}},b=function(e){var t,r;return t={},verb("next"),verb("throw",function(e){throw e}),verb("return"),t[Symbol.iterator]=function(){return this},t;function verb(n,o){t[n]=e[n]?function(t){return(r=!r)?{"value":y(e[n](t)),"done":"return"===n}:o?o(t):t}:o}},v=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof d?d(e):e[Symbol.iterator](),t={},verb("next"),verb("throw"),verb("return"),t[Symbol.asyncIterator]=function(){return this},t);function verb(r){t[r]=e[r]&&function(t){return new Promise(function(n,o){t=e[r](t),function settle(e,t,r,n){Promise.resolve(n).then(function(t){e({"value":t,"done":r})},t)}(n,o,t.done,t.value)})}}},w=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{"value":t}):e.raw=t,e},g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},O=function(e){return e&&e.__esModule?e:{"default":e}},e("__extends",o),e("__assign",a),e("__rest",i),e("__decorate",u),e("__param",c),e("__metadata",s),e("__awaiter",l),e("__generator",f),e("__exportStar",p),e("__values",d),e("__read",h),e("__spread",m),e("__await",y),e("__asyncGenerator",_),e("__asyncDelegator",b),e("__asyncValues",v),e("__makeTemplateObject",w),e("__importStar",g),e("__importDefault",O)}(createExporter(P,createExporter(e)))}.apply(t,[t]))||(e.exports=n)}()}).call(this,r(2))},"50":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{"value":!0}),t.withUser=t.Component=void 0;var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=function get(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:get(o,t,r)}if("value"in n)return n.value;var a=n.get;return void 0!==a?a.call(r):void 0},a=r(1),i=_interopRequireDefault(a),u=_interopRequireWildcard(r(49)),c=(_interopRequireDefault(r(0)),r(9)),s=_interopRequireWildcard(r(10));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}t.Component=a.Component,t.withUser=function withUser(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=function(r){function WithUserHOC(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WithUserHOC);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(WithUserHOC.__proto__||Object.getPrototypeOf(WithUserHOC)).apply(this,arguments));return e.props.authCheckState(),e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(WithUserHOC,e),n(WithUserHOC,[{"key":"isSuperRender","value":function isSuperRender(){var e=this.props;return t||e.userInfo&&e.userInfo.userId}},{"key":"perform","value":function perform(){this.isSuperRender()||i.default.redirectTo({"url":"/pages/login/index"})}},{"key":"componentWillMount","value":function componentWillMount(){this.perform()}},{"key":"render","value":function render(){return this.isSuperRender()?o(WithUserHOC.prototype.__proto__||Object.getPrototypeOf(WithUserHOC.prototype),"render",this).call(this):null}}]),WithUserHOC}();return r=u.__decorate([(0,c.connect)(function(e){return{"userInfo":e.auth}},function(e){return{"authLogin":function authLogin(){return e(s.auth.apply(s,arguments))},"authCheckState":function authCheckState(){return e(s.authCheckState())}}})],r)}}}]);