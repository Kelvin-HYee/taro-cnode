{"version":3,"sources":["webpack:///./.temp/components/reply/index.js","webpack:///./.temp/components/reply/index.scss?8fc2","webpack:///./.temp/components/reply/index.scss","webpack:///./.temp/pages/topic/index.scss?db9f","webpack:///./.temp/pages/topic/index.scss","webpack:///./.temp/pages/topic/index.js","webpack:///./.temp/hoc/router.js","webpack:///./node_modules/throttle-debounce/index.cjs.js","webpack:///./.temp/components/backtotop/index.js","webpack:///./.temp/components/backtotop/index.scss?8c90","webpack:///./.temp/components/backtotop/index.scss","webpack:///./node_modules/immutability-helper/index.js"],"names":["_taroH","__webpack_require__","_components","_router","_taroUi","_request","Reply","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","apply","arguments","handleChange","e","setState","content","target","value","state","hasErr","author_txt","Component","nextProps","props","replyTo","_this2","_state","_props","userInfo","topicId","topic","replyId","show","updateReplies","time","Date","postData","accesstoken","token","reply_id","post","data","url","then","resp","res","success","context","newreplies","_immutabilityHelper2","default","replies","$push","id","author","loginname","avatar_url","ups","create_at","onClose","Taro","showToast","title","error_msg","catch","console","info","_nervjs2","createElement","View","className","AtTextarea","_classnames2","text","err","onChange","type","placeholder","rows","class","onClick","addReply","bind","withUser","module","i","options","sourceMap","hmr","transform","insertInto","undefined","locals","exports","push","version","sources","names","mappings","file","sourceRoot","utils","Topic","config","navigationBarTitleText","getTopic","$router","params","get","d","noData","showMenu","visit_count","tab","good","top","reply_count","curReplyId","userId","item","index","action","inArray","splice","_defineProperty","$set","navigateTo","redirect","encodeURIComponent","fullUrl","_this3","getLastTimeStr","Text","ago","getTabInfo","length","isClass","replayList","map","_link2","to","Image","src","iconfont","icon","uped","isUps","includes","upReply","dangerouslySetInnerHTML","__html","_reply2","fn","hideItemReply","_index3","pageType","fixHead","needAdd","page-box","show-menu","_index5","tslib_1","_reduxH","actions","WrappedComponent","allowNologin","WithUserHOC","authCheckState","_inherits","_createClass","key","isSuperRender","perform","redirectTo","componentWillMount","render","_get","prototype","call","__decorate","connect","_ref","auth","dispatch","authLogin","throttle","delay","noTrailing","callback","debounceMode","timeoutID","lastExec","wrapper","self","elapsed","Number","args","exec","clearTimeout","setTimeout","clear","defineProperty","debounce","atBegin","_throttleDebounce","BackTop","handleScroll","componentScrollBox","scrollTop","document","body","clientHeight","onPageScroll","goTop","getEnv","pageScrollTo","documentElement","window","removeEventListener","scrollbinding","addEventListener","sourcesContent","invariant","hasOwnProperty","Array","toString","obj","slice","assign","source","getAllKeys","forEach","getOwnPropertySymbols","keys","concat","copy","object","isArray","constructor","Map","Set","create","newContext","commands","defaultCommands","update","extend","directive","isEquals","a","b","spec","$apply","join","nextObject","objectWasNextObject","nextValueForKey","nextObjectValue","set","invariantPushAndUnshift","$unshift","$splice","originalObject","invariantSplices","invariantSplice","invariantSet","$toggle","targets","invariantSpecArray","nextObjectCopy","$unset","$add","invariantMapOrSet","pair","has","add","$remove","delete","$merge","invariantMerge","specValue","original","invariantApply","contextForExport","command","typeOfTarget"],"mappings":"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","file":"chunk/topic_index.js","sourcesContent":["import Taro from '@tarojs/taro-h5';\nimport { Component } from \"@tarojs/taro-h5\";\nimport Nerv from \"nervjs\";\nimport { View } from '@tarojs/components';\nimport { withUser } from \"../../hoc/router\";\nimport { AtTextarea } from \"taro-ui\";\nimport classNames from \"classnames\";\nimport update from \"immutability-helper\";\nimport { post } from \"../../utils/request\";\nimport './index.scss';\n// props: ['topic', 'replyId', 'topicId', 'replyTo', 'show'],\nclass Reply extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      hasErr: false,\n      content: \"\",\n      author_txt: \"\\n\\n 来自拉风的 [Taro-cnode](https://github.com/icai/taro-cnode)\"\n    };\n  }\n  componentWillReceiveProps(nextProps) {\n    // console.log(this.props, nextProps);\n  }\n  componentDidMount() {\n    if (this.props.replyTo) {\n      this.setState({\n        content: \"@\" + this.props.replyTo\n      });\n    }\n  }\n  addReply() {\n    const { content, author_txt } = this.state;\n    const { userInfo, topic, topicId, replyId, show, updateReplies } = this.props;\n    if (!content) {\n      this.setState({ hasErr: true });\n    } else {\n      let time = new Date();\n      // let linkUsers = utils.linkUsers(content);\n      // let htmlText = markdown.toHTML(linkUsers) + author_txt;\n      // let replyContent = utils.getContentHtml(htmlText);\n      let postData = {\n        accesstoken: userInfo.token,\n        content: content + author_txt\n      };\n      if (replyId) {\n        postData.reply_id = replyId;\n      }\n      post({\n        data: postData,\n        url: \"https://cnodejs.org/api/v1/topic/\" + topicId + \"/replies\"\n      }).then(resp => {\n        let res = resp.data;\n        if (res.success) {\n          updateReplies && updateReplies((topic, context) => {\n            const newreplies = update(topic.replies, {\n              $push: [{\n                id: res.reply_id,\n                author: {\n                  loginname: userInfo.loginname,\n                  avatar_url: userInfo.avatar_url\n                },\n                content: content,\n                ups: [],\n                create_at: time\n              }]\n            });\n            topic.replies = newreplies;\n            context.setState({ topic: topic });\n          });\n          this.setState({ content: \"\" });\n          if (show) {\n            this.props.onClose();\n          }\n        } else {\n          Taro.showToast({ title: res.error_msg });\n        }\n      }).catch(resp => {\n        console.info(resp);\n      });\n    }\n  }\n  render() {\n    const { hasErr } = this.state;\n    return <View className=\"reply\">\n        <AtTextarea id=\"content\" className={classNames({\n        text: 1,\n        err: hasErr\n      })} value={this.state.content} onChange={this.handleChange} type=\"text\" placeholder=\"回复支持Markdown语法,请注意标记代码\" rows=\"8\" class=\"text\" />\n        <View className=\"button\" onClick={this.addReply.bind(this)}>\n          确定\n        </View>\n      </View>;\n  }\n  handleChange = e => {\n    this.setState({\n      content: e.target.value\n    });\n  };\n}\n// #region 导出注意\n//\n// 经过上面的声明后需要将导出的 Taro.Component 子类修改为子类本身的 props 属性\n// 这样在使用这个子类时 Ts 才不会提示缺少 JSX 类型参数错误\n//\n// #endregion\nexport default withUser(Reply); // as ComponentClass<PageOwnProps, PageState>;","\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--8-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/resolve-url-loader/index.js!../../../node_modules/sass-loader/lib/loader.js??ref--8-4!./index.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"sourceMap\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--8-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/resolve-url-loader/index.js!../../../node_modules/sass-loader/lib/loader.js??ref--8-4!./index.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--8-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/resolve-url-loader/index.js!../../../node_modules/sass-loader/lib/loader.js??ref--8-4!./index.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"index.scss\",\"sourceRoot\":\"\"}]);\n\n// exports\n","\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--8-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/resolve-url-loader/index.js!../../../node_modules/sass-loader/lib/loader.js??ref--8-4!./index.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"sourceMap\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--8-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/resolve-url-loader/index.js!../../../node_modules/sass-loader/lib/loader.js??ref--8-4!./index.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--8-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/resolve-url-loader/index.js!../../../node_modules/sass-loader/lib/loader.js??ref--8-4!./index.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"index.scss\",\"sourceRoot\":\"\"}]);\n\n// exports\n","import { Component } from \"@tarojs/taro-h5\";\nimport Nerv from \"nervjs\";\nimport { View, Text, Image } from '@tarojs/components';\nimport Header from '../../components/header/index';\nimport ALink from \"../../components/link\";\nimport Reply from '../../components/reply';\nimport classNames from \"classnames\";\nimport * as utils from '../../libs/utils';\nimport { withUser } from \"../../hoc/router\";\nimport update from \"immutability-helper\";\nimport { post, get } from \"../../utils/request\";\nimport BackTop from \"../../components/backtotop/index\";\nimport './index.scss';\nclass Topic extends Component {\n  constructor() {\n    super(...arguments);\n\n    this.state = {\n      showMenu: false,\n      topic: {\n        title: \"\",\n        create_at: \"\",\n        visit_count: 0,\n        content: \"\",\n        tab: \"\",\n        good: false,\n        top: false,\n        reply_count: 0,\n        author: {\n          avatar_url: \"\",\n          loginname: \"\"\n        },\n        replies: []\n      },\n      noData: false,\n      topicId: \"\",\n      curReplyId: \"\"\n    };\n  }\n  componentDidMount() {\n    this.getTopic();\n  }\n  addReply(id) {\n    this.setState({ curReplyId: id });\n    if (!this.props.userInfo.userId) {}\n  }\n  hideItemReply() {\n    this.setState({ curReplyId: '' });\n  }\n  upReply(item, index) {\n    const { userInfo } = this.props;\n    const { topic } = this.state;\n    if (!userInfo.userId) {\n      utils.navigateTo({\n        url: \"/pages/login/index\",\n        params: {\n          redirect: encodeURIComponent(this.$router.fullUrl)\n        }\n      });\n    } else {\n      post({\n        url: \"https://cnodejs.org/api/v1/reply/\" + item.id + \"/ups\",\n        data: {\n          accesstoken: userInfo.token\n        }\n      }).then(resp => {\n        let res = resp.data;\n        if (res.success) {\n          if (res.action === \"down\") {\n            let index = utils.inArray(userInfo.userId, item.ups);\n            item.ups.splice(index, 1);\n          } else {\n            item.ups.push(userInfo.userId);\n          }\n          update(topic.replies, {\n            [index]: {\n              $set: item\n            }\n          });\n          this.setState({ topic: topic });\n        }\n      });\n    }\n  }\n  render() {\n    const { noData, topicId, showMenu, curReplyId, topic } = this.state;\n    const { userInfo } = this.props;\n    const getLastTimeStr = (Text, ago) => {\n      return utils.getLastTimeStr(Text, ago);\n    };\n    const getTabInfo = (tab, good = false, top, isClass) => {\n      return utils.getTabInfo(tab, good, top, isClass);\n    };\n    const isUps = ups => {\n      return ups.includes((userInfo || {}).userId);\n    };\n    const replayList = topic.replies.map((item, index) => {\n      return <View className=\"li flex-wrp\">\n          <View className=\"user\">\n            <ALink to={{ url: \"/pages/user/index\", params: { loginname: item.author.loginname } }}>\n              <Image className=\"head\" src={item.author.avatar_url} />\n            </ALink>\n            <View className=\"info\">\n              <Text className=\"cl\">\n                <Text className=\"name\">{item.author.loginname}</Text>\n                <Text className=\"name mt10\">\n                  <Text />\n                  发布于:\n                  {getLastTimeStr(item.create_at, true)}\n                </Text>\n              </Text>\n              <Text className=\"cr\">\n                <Text className={classNames({\n                iconfont: 1,\n                icon: 1,\n                uped: isUps(item.ups)\n              })} onClick={this.upReply.bind(this, item, index)}>\n                  \n                </Text>\n                {item.ups.length}\n               <Text className=\"iconfont icon\" onClick={this.addReply.bind(this, item.id)}>\n                  \n                </Text>\n              </Text>\n            </View>\n          </View>\n          <View className=\"reply_content\" dangerouslySetInnerHTML={{ __html: item.content }} />\n        {userInfo.userId && curReplyId === item.id ? <Reply topic={topic} updateReplies={fn => {\n          fn(topic, this);\n        }} topicId={topicId} replyId={item.id} replyTo={item.author.loginname} show={curReplyId} onClose={this.hideItemReply.bind(this)} /> : \"\"}\n        </View>;\n    });\n    return <View className=\"flex-wrp\">\n        <Header pageType={\"主题\"} fixHead={true} needAdd={true} />\n        {topic.title ? <View className={classNames({\n        'page-box': 1,\n        \"show-menu\": showMenu\n      })}>\n            <View className=\"topic-title\">{topic.title}</View>\n            <View className=\"author-info\">\n              <ALink to={{ url: \"/pages/user/index\", params: { loginname: topic.author.loginname } }}>\n                <Image className=\"avatar\" src={topic.author.avatar_url} />\n              </ALink>\n              <View className=\"col\">\n                <Text>{topic.author.loginname}</Text>\n                <Text className=\"time\">\n                  发布于:\n                  {getLastTimeStr(topic.create_at, true)}\n                </Text>\n              </View>\n              <View className=\"right\">\n                <Text className={\"tag \" + getTabInfo(topic.tab, topic.good, topic.top, true)}>\n                  {getTabInfo(topic.tab, topic.good, topic.top, false)}\n                </Text>\n                <Text className=\"name\">\n                  {topic.visit_count}\n                  次浏览\n                </Text>\n              </View>\n            </View>\n            <View className=\"markdown-body topic-content\" dangerouslySetInnerHTML={{ __html: topic.content }} />\n            <View className=\"topic-reply\">\n              <Text className=\"strong\">{topic.reply_count}</Text> 回复\n            </View>\n            <View className=\"reply-list\">\n              <View className=\"ul\">{replayList}</View>\n            </View>\n            <BackTop />\n        {userInfo.userId ? <Reply topic={topic} updateReplies={fn => {\n          fn(topic, this);\n        }} topicId={topicId} /> : \"\"}\n          </View> : \"\"}\n        {noData ? <View className=\"no-data\">\n            <i className=\"iconfont icon-empty\"></i>\n            该话题不存在!\n          </View> : \"\"}\n      </View>;\n  }\n  config = {\n    navigationBarTitleText: \"主题\"\n  };\n  getTopic = () => {\n    const topicId = this.$router.params.id;\n    this.setState({ topicId });\n    get({\n      url: \"https://cnodejs.org/api/v1/topic/\" + topicId\n    }).then(resp => {\n      let d = resp.data;\n      if (d && d.data) {\n        this.setState({ topic: d.data });\n      } else {\n        this.setState({ noData: true });\n      }\n    });\n  };\n}\nexport default withUser(Topic, true);","import Taro from '@tarojs/taro-h5';\nimport * as tslib_1 from \"tslib\";\nimport { Component } from \"@tarojs/taro-h5\";\nimport Nerv from \"nervjs\";\nimport { connect } from \"@tarojs/redux-h5\";\nimport * as actions from \"../actions/auth\";\nfunction withUser(WrappedComponent, allowNologin = false) {\n  let WithUserHOC = class WithUserHOC extends WrappedComponent {\n    constructor() {\n      super(...arguments);\n      this.props.authCheckState();\n    }\n    isSuperRender() {\n      const props = this.props;\n      return allowNologin || props.userInfo && props.userInfo.userId;\n    }\n    // refer  https://github.com/ReactTraining/react-router/blob/master/packages/react-router/modules/Redirect.js\n    perform() {\n      if (!this.isSuperRender()) {\n        Taro.redirectTo({ url: \"/pages/login/index\" });\n      }\n    }\n    componentWillMount() {\n      this.perform();\n    }\n    render() {\n      if (this.isSuperRender()) {\n        return super.render();\n      } else {\n        return null;\n      }\n    }\n  };\n  WithUserHOC = tslib_1.__decorate([connect(({ auth }) => ({ userInfo: auth }), dispatch => ({\n    authLogin: (...args) => dispatch(actions.auth(...args)),\n    authCheckState: () => dispatch(actions.authCheckState())\n  }))], WithUserHOC);\n  ;\n  return WithUserHOC;\n}\nexport { Component, withUser };","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n/* eslint-disable no-undefined,no-param-reassign,no-shadow */\n\n/**\n * Throttle execution of a function. Especially useful for rate limiting\n * execution of handlers on events like resize and scroll.\n *\n * @param  {Number}    delay          A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {Boolean}   [noTrailing]   Optional, defaults to false. If noTrailing is true, callback will only execute every `delay` milliseconds while the\n *                                    throttled-function is being called. If noTrailing is false or unspecified, callback will be executed one final time\n *                                    after the last throttled-function call. (After the throttled-function has not been called for `delay` milliseconds,\n *                                    the internal counter is reset)\n * @param  {Function}  callback       A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                    to `callback` when the throttled-function is executed.\n * @param  {Boolean}   [debounceMode] If `debounceMode` is true (at begin), schedule `clear` to execute after `delay` ms. If `debounceMode` is false (at end),\n *                                    schedule `callback` to execute after `delay` ms.\n *\n * @return {Function}  A new, throttled, function.\n */\nfunction throttle ( delay, noTrailing, callback, debounceMode ) {\n\n\t/*\n\t * After wrapper has stopped being called, this timeout ensures that\n\t * `callback` is executed at the proper times in `throttle` and `end`\n\t * debounce modes.\n\t */\n\tvar timeoutID;\n\n\t// Keep track of the last time `callback` was executed.\n\tvar lastExec = 0;\n\n\t// `noTrailing` defaults to falsy.\n\tif ( typeof noTrailing !== 'boolean' ) {\n\t\tdebounceMode = callback;\n\t\tcallback = noTrailing;\n\t\tnoTrailing = undefined;\n\t}\n\n\t/*\n\t * The `wrapper` function encapsulates all of the throttling / debouncing\n\t * functionality and when executed will limit the rate at which `callback`\n\t * is executed.\n\t */\n\tfunction wrapper () {\n\n\t\tvar self = this;\n\t\tvar elapsed = Number(new Date()) - lastExec;\n\t\tvar args = arguments;\n\n\t\t// Execute `callback` and update the `lastExec` timestamp.\n\t\tfunction exec () {\n\t\t\tlastExec = Number(new Date());\n\t\t\tcallback.apply(self, args);\n\t\t}\n\n\t\t/*\n\t\t * If `debounceMode` is true (at begin) this is used to clear the flag\n\t\t * to allow future `callback` executions.\n\t\t */\n\t\tfunction clear () {\n\t\t\ttimeoutID = undefined;\n\t\t}\n\n\t\tif ( debounceMode && !timeoutID ) {\n\t\t\t/*\n\t\t\t * Since `wrapper` is being called for the first time and\n\t\t\t * `debounceMode` is true (at begin), execute `callback`.\n\t\t\t */\n\t\t\texec();\n\t\t}\n\n\t\t// Clear any existing timeout.\n\t\tif ( timeoutID ) {\n\t\t\tclearTimeout(timeoutID);\n\t\t}\n\n\t\tif ( debounceMode === undefined && elapsed > delay ) {\n\t\t\t/*\n\t\t\t * In throttle mode, if `delay` time has been exceeded, execute\n\t\t\t * `callback`.\n\t\t\t */\n\t\t\texec();\n\n\t\t} else if ( noTrailing !== true ) {\n\t\t\t/*\n\t\t\t * In trailing throttle mode, since `delay` time has not been\n\t\t\t * exceeded, schedule `callback` to execute `delay` ms after most\n\t\t\t * recent execution.\n\t\t\t *\n\t\t\t * If `debounceMode` is true (at begin), schedule `clear` to execute\n\t\t\t * after `delay` ms.\n\t\t\t *\n\t\t\t * If `debounceMode` is false (at end), schedule `callback` to\n\t\t\t * execute after `delay` ms.\n\t\t\t */\n\t\t\ttimeoutID = setTimeout(debounceMode ? clear : exec, debounceMode === undefined ? delay - elapsed : delay);\n\t\t}\n\n\t}\n\n\t// Return the wrapper function.\n\treturn wrapper;\n\n}\n\n/* eslint-disable no-undefined */\n\n/**\n * Debounce execution of a function. Debouncing, unlike throttling,\n * guarantees that a function is only executed a single time, either at the\n * very beginning of a series of calls, or at the very end.\n *\n * @param  {Number}   delay         A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {Boolean}  [atBegin]     Optional, defaults to false. If atBegin is false or unspecified, callback will only be executed `delay` milliseconds\n *                                  after the last debounced-function call. If atBegin is true, callback will be executed only at the first debounced-function call.\n *                                  (After the throttled-function has not been called for `delay` milliseconds, the internal counter is reset).\n * @param  {Function} callback      A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                  to `callback` when the debounced-function is executed.\n *\n * @return {Function} A new, debounced function.\n */\nfunction debounce ( delay, atBegin, callback ) {\n\treturn callback === undefined ? throttle(delay, atBegin, false) : throttle(delay, callback, atBegin !== false);\n}\n\nexports.throttle = throttle;\nexports.debounce = debounce;\n","import Taro from '@tarojs/taro-h5';\nimport { Component } from \"@tarojs/taro-h5\";\nimport Nerv from \"nervjs\";\nimport { View } from '@tarojs/components';\nimport { throttle } from 'throttle-debounce';\nimport './index.scss';\nclass BackTop extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      show: false\n    };\n    // web\n\n    if (Taro.getEnv() == 'WEB') {\n      this.componentScrollBox = document.documentElement;\n    }\n  }\n  componentWillUnmount() {\n    if (Taro.getEnv() == 'WEB') {\n      window.removeEventListener(\"scroll\", this.scrollbinding);\n    }\n  }\n  componentDidMount() {\n    if (Taro.getEnv() == 'WEB') {\n      this.scrollbinding = throttle(300, this.handleScroll);\n      window.addEventListener(\"scroll\", this.scrollbinding);\n    }\n  }\n  render() {\n    const { show } = this.state;\n    return <View>\n        {show ? <View className=\"iconfont icon-top\" onClick={this.goTop}>\n            \n          </View> : \"\"}\n      </View>;\n  }\n  handleScroll = () => {\n    const scrollTop = this.componentScrollBox.scrollTop;\n    const show = scrollTop >= 0.5 * document.body.clientHeight;\n    this.setState({\n      show: show\n    });\n  };\n  onPageScroll = e => {\n    const scrollTop = e.scrollTop;\n    const show = scrollTop > 500 ? true : false;\n    this.setState({ show: show });\n  };\n  goTop = () => {\n    if (Taro.getEnv() == 'WEB') {\n      this.componentScrollBox.scrollTop = 0;\n    } else if (Taro.getEnv() == 'WEAPP') {\n      Taro.pageScrollTo({\n        scrollTop: 0\n      });\n    }\n  };\n}\nexport default BackTop;","\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--8-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/resolve-url-loader/index.js!../../../node_modules/sass-loader/lib/loader.js??ref--8-4!./index.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"sourceMap\":true,\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--8-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/resolve-url-loader/index.js!../../../node_modules/sass-loader/lib/loader.js??ref--8-4!./index.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--8-1!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/resolve-url-loader/index.js!../../../node_modules/sass-loader/lib/loader.js??ref--8-4!./index.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".icon-top {\\n  position: fixed;\\n  right: 0.21333rem;\\n  bottom: 1.70667rem;\\n  font-size: 48PX;\\n  z-index: 9999;\\n  color: #42b983;\\n}\\n\\n\", \"\", {\"version\":3,\"sources\":[\"/home/travis/build/icai/taro-cnode/.temp/components/backtotop/index.scss\"],\"names\":[],\"mappings\":\"AAAA;EACE,gBAAA;EACA,kBAAA;EACA,mBAAA;EACA,gBAAA;EACA,cAAA;EACA,eAAA;CACD\",\"file\":\"index.scss\",\"sourcesContent\":[\".icon-top {\\n  position: fixed;\\n  right: 10px;\\n  bottom: 80px;\\n  font-size: 48PX;\\n  z-index: 9999;\\n  color: #42b983;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n","var invariant = require('invariant');\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar splice = Array.prototype.splice;\n\nvar toString = Object.prototype.toString\nvar type = function(obj) {\n  return toString.call(obj).slice(8, -1);\n}\n\nvar assign = Object.assign || /* istanbul ignore next */ function assign(target, source) {\n  getAllKeys(source).forEach(function(key) {\n    if (hasOwnProperty.call(source, key)) {\n      target[key] = source[key];\n    }\n  });\n  return target;\n};\n\nvar getAllKeys = typeof Object.getOwnPropertySymbols === 'function' ?\n  function(obj) { return Object.keys(obj).concat(Object.getOwnPropertySymbols(obj)) } :\n  /* istanbul ignore next */ function(obj) { return Object.keys(obj) };\n\n/* istanbul ignore next */\nfunction copy(object) {\n  if (Array.isArray(object)) {\n    return assign(object.constructor(object.length), object)\n  } else if (type(object) === 'Map') {\n    return new Map(object)\n  } else if (type(object) === 'Set') {\n    return new Set(object)\n  } else if (object && typeof object === 'object') {\n    var prototype = Object.getPrototypeOf(object);\n    return assign(Object.create(prototype), object);\n  } else {\n    return object;\n  }\n}\n\nfunction newContext() {\n  var commands = assign({}, defaultCommands);\n  update.extend = function(directive, fn) {\n    commands[directive] = fn;\n  };\n  update.isEquals = function(a, b) { return a === b; };\n\n  return update;\n\n  function update(object, spec) {\n    if (typeof spec === 'function') {\n      spec = { $apply: spec };\n    }\n\n    if (!(Array.isArray(object) && Array.isArray(spec))) {\n      invariant(\n        !Array.isArray(spec),\n        'update(): You provided an invalid spec to update(). The spec may ' +\n        'not contain an array except as the value of $set, $push, $unshift, ' +\n        '$splice or any custom command allowing an array value.'\n      );\n    }\n\n    invariant(\n      typeof spec === 'object' && spec !== null,\n      'update(): You provided an invalid spec to update(). The spec and ' +\n      'every included key path must be plain objects containing one of the ' +\n      'following commands: %s.',\n      Object.keys(commands).join(', ')\n    );\n\n    var nextObject = object;\n    var index, key;\n    getAllKeys(spec).forEach(function(key) {\n      if (hasOwnProperty.call(commands, key)) {\n        var objectWasNextObject = object === nextObject;\n        nextObject = commands[key](spec[key], nextObject, spec, object);\n        if (objectWasNextObject && update.isEquals(nextObject, object)) {\n          nextObject = object;\n        }\n      } else {\n        var nextValueForKey =\n          type(object) === 'Map'\n            ? update(object.get(key), spec[key])\n            : update(object[key], spec[key]);\n        var nextObjectValue =\n          type(nextObject) === 'Map'\n              ? nextObject.get(key)\n              : nextObject[key];\n        if (!update.isEquals(nextValueForKey, nextObjectValue) || typeof nextValueForKey === 'undefined' && !hasOwnProperty.call(object, key)) {\n          if (nextObject === object) {\n            nextObject = copy(object);\n          }\n          if (type(nextObject) === 'Map') {\n            nextObject.set(key, nextValueForKey);\n          } else {\n            nextObject[key] = nextValueForKey;\n          }\n        }\n      }\n    })\n    return nextObject;\n  }\n\n}\n\nvar defaultCommands = {\n  $push: function(value, nextObject, spec) {\n    invariantPushAndUnshift(nextObject, spec, '$push');\n    return value.length ? nextObject.concat(value) : nextObject;\n  },\n  $unshift: function(value, nextObject, spec) {\n    invariantPushAndUnshift(nextObject, spec, '$unshift');\n    return value.length ? value.concat(nextObject) : nextObject;\n  },\n  $splice: function(value, nextObject, spec, originalObject) {\n    invariantSplices(nextObject, spec);\n    value.forEach(function(args) {\n      invariantSplice(args);\n      if (nextObject === originalObject && args.length) nextObject = copy(originalObject);\n      splice.apply(nextObject, args);\n    });\n    return nextObject;\n  },\n  $set: function(value, nextObject, spec) {\n    invariantSet(spec);\n    return value;\n  },\n  $toggle: function(targets, nextObject) {\n    invariantSpecArray(targets, '$toggle');\n    var nextObjectCopy = targets.length ? copy(nextObject) : nextObject;\n\n    targets.forEach(function(target) {\n      nextObjectCopy[target] = !nextObject[target];\n    });\n\n    return nextObjectCopy;\n  },\n  $unset: function(value, nextObject, spec, originalObject) {\n    invariantSpecArray(value, '$unset');\n    value.forEach(function(key) {\n      if (Object.hasOwnProperty.call(nextObject, key)) {\n        if (nextObject === originalObject) nextObject = copy(originalObject);\n        delete nextObject[key];\n      }\n    });\n    return nextObject;\n  },\n  $add: function(value, nextObject, spec, originalObject) {\n    invariantMapOrSet(nextObject, '$add');\n    invariantSpecArray(value, '$add');\n    if (type(nextObject) === 'Map') {\n      value.forEach(function(pair) {\n        var key = pair[0];\n        var value = pair[1];\n        if (nextObject === originalObject && nextObject.get(key) !== value) nextObject = copy(originalObject);\n        nextObject.set(key, value);\n      });\n    } else {\n      value.forEach(function(value) {\n        if (nextObject === originalObject && !nextObject.has(value)) nextObject = copy(originalObject);\n        nextObject.add(value);\n      });\n    }\n    return nextObject;\n  },\n  $remove: function(value, nextObject, spec, originalObject) {\n    invariantMapOrSet(nextObject, '$remove');\n    invariantSpecArray(value, '$remove');\n    value.forEach(function(key) {\n      if (nextObject === originalObject && nextObject.has(key)) nextObject = copy(originalObject);\n      nextObject.delete(key);\n    });\n    return nextObject;\n  },\n  $merge: function(value, nextObject, spec, originalObject) {\n    invariantMerge(nextObject, value);\n    getAllKeys(value).forEach(function(key) {\n      if (value[key] !== nextObject[key]) {\n        if (nextObject === originalObject) nextObject = copy(originalObject);\n        nextObject[key] = value[key];\n      }\n    });\n    return nextObject;\n  },\n  $apply: function(value, original) {\n    invariantApply(value);\n    return value(original);\n  }\n};\n\nvar contextForExport = newContext();\n\nmodule.exports = contextForExport;\nmodule.exports.default = contextForExport;\nmodule.exports.newContext = newContext;\n\n// invariants\n\nfunction invariantPushAndUnshift(value, spec, command) {\n  invariant(\n    Array.isArray(value),\n    'update(): expected target of %s to be an array; got %s.',\n    command,\n    value\n  );\n  invariantSpecArray(spec[command], command)\n}\n\nfunction invariantSpecArray(spec, command) {\n  invariant(\n    Array.isArray(spec),\n    'update(): expected spec of %s to be an array; got %s. ' +\n    'Did you forget to wrap your parameter in an array?',\n    command,\n    spec\n  );\n}\n\nfunction invariantSplices(value, spec) {\n  invariant(\n    Array.isArray(value),\n    'Expected $splice target to be an array; got %s',\n    value\n  );\n  invariantSplice(spec['$splice']);\n}\n\nfunction invariantSplice(value) {\n  invariant(\n    Array.isArray(value),\n    'update(): expected spec of $splice to be an array of arrays; got %s. ' +\n    'Did you forget to wrap your parameters in an array?',\n    value\n  );\n}\n\nfunction invariantApply(fn) {\n  invariant(\n    typeof fn === 'function',\n    'update(): expected spec of $apply to be a function; got %s.',\n    fn\n  );\n}\n\nfunction invariantSet(spec) {\n  invariant(\n    Object.keys(spec).length === 1,\n    'Cannot have more than one key in an object with $set'\n  );\n}\n\nfunction invariantMerge(target, specValue) {\n  invariant(\n    specValue && typeof specValue === 'object',\n    'update(): $merge expects a spec of type \\'object\\'; got %s',\n    specValue\n  );\n  invariant(\n    target && typeof target === 'object',\n    'update(): $merge expects a target of type \\'object\\'; got %s',\n    target\n  );\n}\n\nfunction invariantMapOrSet(target, command) {\n  var typeOfTarget = type(target);\n  invariant(\n    typeOfTarget === 'Map' || typeOfTarget === 'Set',\n    'update(): %s expects a target of type Set or Map; got %s',\n    command,\n    typeOfTarget\n  );\n}\n"],"sourceRoot":""}